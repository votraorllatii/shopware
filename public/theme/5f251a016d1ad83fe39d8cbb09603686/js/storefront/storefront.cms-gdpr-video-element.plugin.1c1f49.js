"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[24899],{4899:(e,t,i)=>{i.r(t),i.d(t,{CMS_GDPR_VIDEO_ELEMENT_REPLACE_ELEMENT_WITH_VIDEO:()=>a,default:()=>r});var l=i(4335),n=i(9068),s=i(1452),o=i(746);let a="CmsGdprVideoElement_replaceElementWithVideo";class r extends l.A{static #e=this.options={cookieName:"youtube-video",btnClasses:[],videoUrl:null,iframeClasses:[],overlayText:null,backdropClasses:["element-loader-backdrop","element-loader-backdrop-open"],confirmButtonText:null,modalTriggerSelector:'[data-bs-toggle="modal"][data-url]',urlAttribute:"data-url"};init(){document.$emitter.subscribe(o.COOKIE_CONFIGURATION_CLOSE_OFF_CANVAS,this.checkConsentAndReplaceVideo.bind(this)),document.$emitter.subscribe(a,this._replaceElementWithVideo.bind(this)),this.checkConsentAndReplaceVideo(),this._client=new n.A,this.backdropElement=this.createElementBackdrop(),this.el.appendChild(this.backdropElement)}createElementBackdrop(){let e=document.createElement("div");this.options.backdropClasses.forEach(t=>{e.classList.add(t)});let t=document.createElement("div");return t.appendChild(this.createTextOverlay()),t.appendChild(this.createBackdropConfirmElement()),e.appendChild(t),e}createTextOverlay(){let e=document.createElement("p");return e.innerHTML=this.options.overlayText,e}createBackdropConfirmElement(){let e=document.createElement("button");return e.innerHTML=this.options.confirmButtonText,this.options.btnClasses.forEach(t=>{e.classList.add(t)}),e.addEventListener("click",this.onReplaceElementWithVideo.bind(this),!1,{once:!0}),e}onReplaceElementWithVideo(e){return e.preventDefault(),s.A.setItem(this.options.cookieName,"1","30"),document.$emitter.publish(a),!0}_replaceElementWithVideo(){let e=document.createElement("iframe");e.setAttribute("src",this.options.videoUrl),e.setAttribute("title",this.options.iframeTitle),e.setAttribute("allowfullscreen","allowfullscreen"),this.options.iframeClasses.forEach(t=>{e.classList.add(t)});let t=this.el.parentNode;return t.appendChild(e),t.removeChild(this.el),!0}checkConsentAndReplaceVideo(){s.A.getItem(this.options.cookieName)&&this._replaceElementWithVideo()}}}}]);