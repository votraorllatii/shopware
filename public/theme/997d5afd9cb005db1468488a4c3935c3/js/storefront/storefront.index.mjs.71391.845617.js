"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[71391,93772],{3772:(e,t,r)=>{r.r(t),r.d(t,{ARDesktopPlatformError:()=>k,ARError:()=>g,ARQuickLook:()=>E,ARQuickLookNotSafariError:()=>f,ARQuickLookUnknownError:()=>A,ARQuickLookVersionMismatchError:()=>b,ARSystem:()=>N,EARErrorType:()=>m,SceneViewer:()=>I});var o=Object.defineProperty,n=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,i=(e,t,r)=>n(e,"symbol"!=typeof t?t+"":t,r),s=(e=>(e.IOS="iOS",e.ANDROID="Android",e.WINDOWS="Windows",e.MACOS="MacOS",e.LINUX="Linux",e.UNKNOWN="Unknown",e))(s||{}),a=(e=>(e.NO_WEBXR_API="NO_WEBXR_API",e.NO_HTTPS="NO_HTTPS",e.IMMERSIVE_AR_NOT_SUPPORTED_BY_DEVICE="IMMERSIVE_AR_NOT_SUPPORTED_BY_DEVICE",e.AR_PERMISSION_DENIED="AR_PERMISSION_DENIED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e))(a||{}),u=(e=>(e.CHROMIUM="Chromium",e.SAFARI="Safari",e.WEBKIT="WebKit",e.FIREFOX="Firefox",e.EDGE_LEGACY="EdgeLegacy",e.UNKNOWN="Unknown",e))(u||{});class c{static getSystem(){if(typeof window>"u"||!window.navigator)return s.UNKNOWN;let e=window.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")?s.IOS:e.includes("android")?s.ANDROID:e.includes("windows")?s.WINDOWS:e.includes("macintosh")?s.MACOS:e.includes("linux")?s.LINUX:s.UNKNOWN}static async getSupportsWebXR(){if(!1!==this._supportsWebXR)return this._supportsWebXR;if(!window.isSecureContext)return this._supportsWebXR=!1,this._webXRUnsupportedReason=a.NO_HTTPS,this._supportsWebXR;if(!navigator.xr)return this._supportsWebXR=!1,this._webXRUnsupportedReason=a.NO_WEBXR_API,this._supportsWebXR;try{let e=await navigator.xr.isSessionSupported("immersive-ar");this._supportsWebXR=e,this._supportsWebXR||(this._webXRUnsupportedReason=a.IMMERSIVE_AR_NOT_SUPPORTED_BY_DEVICE)}catch{this._supportsWebXR=!1,this._webXRUnsupportedReason=a.AR_PERMISSION_DENIED}return this._supportsWebXR}static getWebXRUnsupportedReason(){return this._supportsWebXR?(console.log("WebXR is supported."),null):this._webXRUnsupportedReason}static getSupportsARQuickLook(){return!!document.createElement("a").relList.supports("ar")}static getSupportsSceneViewer(){if(typeof window>"u"||!window.navigator)return!1;let e=window.navigator.userAgent.toLowerCase();if(!e.includes("android")||!e.includes("chrome"))return!1;let t=e.match(/chrome\/(\d+)/);return!(!t||89>parseInt(t[1]))}static get isMobile(){return this.getSystem()===s.ANDROID||this.getSystem()===s.IOS}static get isDesktop(){return!this.isMobile}static getSupportsAR(){return this.getSupportsARQuickLook()||this.getSupportsSceneViewer()}static getBrowser(){var e;if(typeof window>"u"||!window.navigator)return"Unknown";let t=window.navigator.userAgent.toLowerCase(),r=null==(e=window.navigator.vendor)?void 0:e.toLowerCase();return t.includes("fxios/")?"Firefox":t.includes("crios/")?"Chromium":t.includes("firefox/")?"Firefox":t.includes("safari/")&&t.includes("version/")&&!t.includes("chrome/")&&!t.includes("edg/")&&!t.includes("opr/")?"Safari":t.includes("edg/")?"Chromium":t.includes("edge/")?"EdgeLegacy":t.includes("chrome/")||null!=r&&r.includes("google inc.")?"Chromium":t.includes("applewebkit")?"WebKit":"Unknown"}static getIOSVersion(){if(this.getSystem()!==s.IOS||typeof window>"u"||!window.navigator)return null;let e=window.navigator.userAgent.match(/(?:iPhone OS|iPad OS|OS) (\d+[._\d]*)/i);if(e&&e[1]){let t=e[1].replace(/_/g,"."),r=parseInt(t.split(".")[0],10);if(!isNaN(r))return{major:r,full:t}}return null}}i(c,"_supportsWebXR",!1),i(c,"_webXRUnsupportedReason",null);var l=Object.defineProperty,p=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t,r)=>p(e,"symbol"!=typeof t?t+"":t,r);class R{constructor(e,t){d(this,"_uri",""),this._loader=e,this._exporter=t}convert(e){return this._uri=e,{to:this._to.bind(this)}}async _to(e,t){let r=await this._loader.load(this._uri);return this._exporter.export(r,e,t)}}var _=r(8883),h=r(5197),w=Object.defineProperty,S=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t,r)=>S(e,"symbol"!=typeof t?t+"":t,r),m=(e=>(e.AR_DESKTOP_PLATFORM_ERROR="ar-desktop-platform-error",e.AR_QUICK_LOOK_NOT_SAFARI_ERROR="ar-quicklook-not-safari-error",e.AR_QUICK_LOOK_VERSION_MISMATCH_ERROR="ar-quicklook-version-mismatch-error",e.AR_QUICK_LOOK_UNKNOWN_ERROR="ar-quicklook-unknown-error",e))(m||{});class g extends Error{constructor(e,t){super(e),O(this,"type"),this.name=this.constructor.name,this.type=t,Object.setPrototypeOf(this,new.target.prototype)}}class k extends g{constructor(){super("AR features are not supported on desktop platforms.","ar-desktop-platform-error")}}class f extends g{constructor(){super("ARQuickLook on iOS is only available in Safari.","ar-quicklook-not-safari-error")}}class b extends g{constructor(e,t){super(`ARQuickLook requires iOS version ${t} or later. Current version: ${e}.`,"ar-quicklook-version-mismatch-error"),this.currentVersion=e,this.requiredVersion=t}}class A extends g{constructor(){super("An unknown ARQuickLook compatibility error occurred.","ar-quicklook-unknown-error")}}class E{constructor(){O(this,"converter",new R(new _.A,new h.A))}async launch(e,t){if(c.getBrowser()!==u.SAFARI)return Promise.reject(new f);let r=c.getIOSVersion();if(r&&r.major<12)return Promise.reject(new b(r.full,12));if(!r||!c.getSupportsARQuickLook())return Promise.reject(new A);let o=await this.convertToUSDZ(e,t);return this.launchARQuickLook(o,t)}async convertToUSDZ(e,t){let r=new Blob([await this.converter.convert(e).to("usdz",{quickLookCompatible:!0,ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}}})],{type:"model/vnd.usdz+zip"});return URL.createObjectURL(r)}launchARQuickLook(e,t){return new Promise(r=>{(null==t?void 0:t.arScale)==="fixed"&&(e=e.concat("#allowsContentScaling=0"));let o=document.createElement("a");o.innerHTML="<picture></picture>",o.rel="ar",o.href=e,o.download="scene.usdz",r(),o.click()})}}class I{launch(e,t){let r=self.location.toString(),o=document.createElement("a"),n=this._createParams(r,e,t),i=this._createIntent(r,e,n);o.setAttribute("href",i),o.click()}_createParams(e,t,r){let o=new URLSearchParams(new URL(t,e).search);return o.set("mode","ar_preferred"),this._applyScaleOption(o,r),this._applyPlacementOption(o,r),this._applySoundOption(o,e),this._applyLinkOption(o,e),o}_applyScaleOption(e,t){(null==t?void 0:t.arScale)==="fixed"&&e.set("resizable","false")}_applyPlacementOption(e,t){(null==t?void 0:t.arPlacement)==="vertical"&&e.set("enable_vertical_placement","true")}_applySoundOption(e,t){if(e.has("sound")){let r=new URL(e.get("sound"),t);e.set("sound",r.toString())}}_applyLinkOption(e,t){if(e.has("link")){let r=new URL(e.get("link"),t);e.set("link",r.toString())}}_createIntent(e,t,r){let o=new URL(e),n=new URL(t,e);return o.hash="#model-viewer-no-ar-fallback",`intent://arvr.google.com/scene-viewer/1.2?${r.toString()+"&file="+n.toString()}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(o.toString())};end;`}}class N{async launch(e,t){let r=c.getSystem();return r===s.IOS?new E().launch(e,t):r===s.ANDROID?new I().launch(e,t):Promise.reject(new k)}}}}]);